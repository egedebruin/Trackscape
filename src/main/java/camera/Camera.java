package camera;

import java.util.ArrayList;
import java.util.List;
import org.opencv.core.Mat;
import org.opencv.videoio.VideoCapture;

/**
 * Class describing a camera.
 * Camera holds relevant information about data generated by a camera
 */
public class Camera {

    private List<CameraObject> cameraObjectList = null;
    private VideoCapture videoCapture = null;
    private String link = null;
    private Mat lastFrame = new Mat();

    /**
     * Constructor for a Camera.
     * @param newCapture The VideoCapture of this camera.
     * @param newLink The link of this camera.
     */
    public Camera(VideoCapture newCapture, String newLink) {
        cameraObjectList = new ArrayList<>();
        videoCapture = newCapture;
        link = newLink;
    }

    /**
     * Gets the last known frame of this camera.
     * @return The frame in Mat format.
     */
    public Mat getLastFrame() {
        Mat newFrame = loadFrame();

        if (newFrame != null) {
            lastFrame = newFrame;
        }

        return lastFrame;
    }

    /**
     * Reads the videoCapture to load the new frame.
     * @return The new frame in Mat format.
     */
    private Mat loadFrame() {
        videoCapture.read(lastFrame);
        return lastFrame;
    }
}
